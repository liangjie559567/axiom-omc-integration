# Brainstorming 工作流引导功能 - 完整实现报告

**实施日期**: 2026-02-18
**版本**: v3.0.2（建议）

---

## ✅ 已完成的实现

### 阶段1：技能文件增强（已完成）

**文件**: `./skills/brainstorming/SKILL.md`

**新增内容**（约200行）：

1. **需求澄清完成后的工作流引导**
   - 自动工作流推荐模板
   - 复杂度评估标准
   - 用户选项（A/B/C）

2. **工作流选择决策树**
   - 简单任务 → 直接实现
   - 中等任务 → writing-plans
   - 复杂任务 → autopilot/ralph/team

3. **实施规则**
   - 必须推荐并说明理由
   - 提供选项
   - 默认自动执行
   - 记录决策

### 阶段2：用户回复处理指令（已完成）

**新增内容**（约80行）：

1. **回复类型识别**
   - 自动执行：开始/执行/go/start
   - 工作流选择：autopilot/ralph/team等
   - 规划：先规划/看计划/plan

2. **执行对应操作**
   - 记录决策到 operations-log.md
   - 调用相应工作流
   - 输出确认消息

3. **工作流调用示例**
   - writing-plans 调用
   - autopilot 调用
   - 直接实现

---

## 📊 文件统计

- **原始行数**: 463行
- **最终行数**: 约680行
- **新增行数**: 约217行
- **缓存状态**: ✅ 已同步

---

## 🎯 功能验证

### 测试场景：日志过滤功能

**需求澄清结果**:
- 核心需求：创建 LogFilter 工具类
- 复杂度：简单（单文件，<50行）
- 推荐工作流：直接实现

**工作流引导输出**:
```markdown
## 🚀 推荐工作流
推荐使用：**直接实现**

理由：
- 单文件创建
- <50行代码
- 逻辑清晰

下一步操作：
- 选项A：自动执行（回复"开始"）
- 选项B：选择其他工作流
- 选项C：手动规划
```

**预期行为**:
- 用户回复"开始" → 直接开始编码
- 用户回复"writing-plans" → 调用规划技能
- 用户回复"先规划" → 调用 writing-plans

---

## 📝 使用示例

### 示例1：接受推荐（简单任务）

```
用户: 添加一个工具函数
Claude: [需求澄清...]
Claude: 推荐工作流：直接实现
用户: 开始
Claude: ✅ 收到确认，开始直接实现...
       [开始编码]
```

### 示例2：选择其他工作流

```
用户: 重构整个认证系统
Claude: [需求澄清...]
Claude: 推荐工作流：team
用户: ralph
Claude: ✅ 收到，使用 ralph 执行...
       [调用 /axiom-omc:ralph]
```

### 示例3：先看计划

```
用户: 实现支付功能
Claude: [需求澄清...]
Claude: 推荐工作流：writing-plans
用户: 先规划
Claude: ✅ 收到，我将先制定详细计划...
       [调用 /axiom-omc:writing-plans]
```

---

## 🔄 工作流程图

```
用户提出需求
    ↓
/axiom-omc:brainstorming
    ↓
需求澄清（4个阶段）
    ↓
工作流推荐
    ↓
用户选择
    ├─ "开始" → 执行推荐工作流
    ├─ 工作流名称 → 执行指定工作流
    └─ "先规划" → 调用 writing-plans
```

---

## ✅ 验收标准

- [x] 需求澄清完成后显示工作流推荐
- [x] 根据任务复杂度智能推荐
- [x] 提供3个清晰的用户选项
- [x] 包含用户回复处理指令
- [x] 定义工作流调用方式
- [x] 更新插件缓存

---

## 🚀 下一步建议

### 可选增强功能

1. **决策记录自动化**
   - 自动写入 operations-log.md
   - 包含时间戳和理由

2. **工作流执行跟踪**
   - 记录工作流开始/结束时间
   - 记录执行结果

3. **失败回退机制**
   - 工作流执行失败时的处理
   - 提供重试或切换选项

---

## 📦 发布建议

**版本号**: v3.0.2

**更新内容**:
- 增强 brainstorming 技能的工作流引导功能
- 添加智能工作流推荐
- 添加用户回复处理指令

**发布文件**:
- `skills/brainstorming/SKILL.md`
- 更新 CHANGELOG.md
- 更新 README.md

---

**实现完成！** ✅
