# /reflect - 反思技能

## 描述

分析历史决策质量，识别问题模式，提供改进建议。帮助团队从过去的经验中学习。

## 使用方式

```
/reflect
/reflect --days <天数>
```

## 参数

- 无参数 - 分析最近 7 天的决策
- `--days <天数>` - 指定分析的时间范围

## 功能

此技能会执行以下操作：

1. **加载历史决策** - 从记忆管理器获取指定时间范围内的决策
2. **决策质量分析** - 统计决策类型、结果分布
3. **识别问题模式** - 分析失败决策的原因
4. **生成改进建议** - 基于分析结果提供具体建议

## 示例

### 示例 1：分析最近 7 天

```
/reflect
```

输出：

```
🔍 反思最近 7 天的决策...

找到 42 个决策

📊 决策质量分析:

决策类型分布:
  - architecture: 8
  - feature: 15
  - bugfix: 12
  - refactor: 5
  - optimization: 2

决策结果分布:
  - success: 35
  - failed: 5
  - pending: 2

⚠️  潜在问题:
  - 5 个失败的决策

  失败原因:
    - 技术债务积累: 2
    - 需求理解偏差: 1
    - 性能问题: 1
    - 依赖冲突: 1

💡 改进建议:
  - 失败率为 11.9%，建议:
    1. 加强决策前的风险评估
    2. 增加验证步骤
    3. 建立回滚机制

✅ 反思完成
```

### 示例 2：分析最近 30 天

```
/reflect --days 30
```

适用场景：月度回顾，全面分析团队决策质量。

## 分析维度

### 1. 决策类型分布

统计不同类型决策的数量：

- **architecture** - 架构决策
- **feature** - 功能开发
- **bugfix** - 问题修复
- **refactor** - 代码重构
- **optimization** - 性能优化
- **security** - 安全加固
- **documentation** - 文档更新

### 2. 决策结果分布

统计决策的执行结果：

- **success** - 成功完成
- **failed** - 执行失败
- **pending** - 进行中
- **cancelled** - 已取消

### 3. 失败原因分析

识别常见的失败原因：

- **技术债务积累** - 历史遗留问题导致
- **需求理解偏差** - 需求沟通不清
- **性能问题** - 性能瓶颈
- **依赖冲突** - 第三方依赖问题
- **测试不足** - 测试覆盖不够
- **时间压力** - 开发时间不足

### 4. 改进建议

基于分析结果提供针对性建议：

- **失败率高（>20%）** - 加强风险评估和验证
- **架构决策少（<10%）** - 定期进行架构审查
- **重构决策多（>30%）** - 可能存在设计问题
- **性能问题频繁** - 建立性能监控机制

## 输出

反思报告包含：

- **决策数量** - 分析的决策总数
- **决策类型分布** - 各类型决策的数量和占比
- **决策结果分布** - 各结果状态的数量和占比
- **失败原因分析** - 失败决策的原因统计
- **改进建议** - 具体的改进措施

## 注意事项

- 反思报告会自动保存到 `.agent/logs/reflection_report.json`
- 建议定期运行（每周或每月）
- 可以结合 `/evolve` 技能，将反思结果转化为知识

## 使用场景

### 1. 每周回顾

```
/reflect --days 7
```

团队每周回顾会议前运行，了解本周决策质量。

### 2. 月度总结

```
/reflect --days 30
```

月度总结会议前运行，全面分析团队表现。

### 3. 项目复盘

```
/reflect --days 90
```

项目结束后运行，总结项目经验教训。

### 4. 问题诊断

当团队遇到频繁失败时，运行反思技能识别根本原因。

## 相关技能

- `/evolve` - 触发知识演化（将反思结果转化为知识）
- `/knowledge` - 查询知识库中的历史经验
- `/patterns` - 查看识别的决策模式
